<?php class Wyomind_Pointofsale_Adminhtml_ManageController extends Mage_Adminhtml_Controller_Action { protected function _initAction() { $x39="\x73\x74r\x74\157lowe\x72";
 $x3a="\x61\x72\x72a\171_\x70\x6fp";  $x3b="\145\170\x70\154\x6fd\145";  $x3c="i\x6e_array";  $x3d="i\x6d\160l\x6f\x64e";  $x3e="\x73\x74rlen";  $x3f="\x63\x6fu\156t";  $this->_title($this->__('Manage'))->_title($this->__('POS / Warehouses'));  $this->loadLayout() ->_setActiveMenu("\x73\x61\x6ces\x2fpo\x69\156\x74\x6f\x66sal\145");  return $this;  } public function indexAction() { $x39="\x73t\x72\x74\x6f\x6c\x6f\x77er";  $x3a="arra\x79\x5f\160\x6f\160";  $x3b="\145\x78p\x6c\x6fd\x65";  $x3c="\x69n\x5f\141r\x72\141y";  $x3d="\x69\155p\x6c\157d\x65";  $x3e="\163\164r\x6c\145\x6e";  $x3f="co\165\x6et";  $this->_initAction() ->renderLayout();  } public function importCsvAction() { $x39="\x73\164\x72t\157\x6co\167e\162";  $x3a="a\x72\162ay\x5f\x70\x6f\x70";  $x3b="\145xp\x6co\x64\x65";  $x3c="\151\x6e_\141\x72ra\x79";  $x3d="i\155\x70l\x6f\x64\x65";  $x3e="s\x74rle\x6e";  $x3f="\x63\x6f\x75\156t";  $this->loadLayout();  $this->_setActiveMenu("\x73\x61\x6ces\x2fpo\x69\156\x74\x6f\x66sal\145");  $this->_addBreadcrumb(Mage::helper("\x70\x6f\x69\x6e\x74\157\146\163\141l\145")->__("\x50O\x53\x20\x2f \127\141\x72\x65\150o\x75\x73\x65\163"), ("\x50O\x53\x20\x2f \127\141\x72\x65\150o\x75\x73\x65\163"));  $this->getLayout()->getBlock("h\x65\x61d")->setCanLoadExtJs(true);  $this->_addContent($this->getLayout()->createBlock("\x70o\x69\x6eto\x66s\x61\x6c\145\57\141\x64m\x69\x6e\150t\155l\x5f\x6d\141\x6e\141\x67e\137\151mp\x6f\x72\x74")) ->_addLeft($this->getLayout()->createBlock("\x70\x6f\x69\x6e\x74\157\146\163a\154\145\x2fadm\x69n\x68\164\x6d\x6c_\155\x61\156a\x67\145\x5f\x69\155\x70\x6f\162\x74\x5ft\141bs"));  $this->renderLayout();  } public function editAction() { $x39="st\162\x74o\x6c\x6fw\145\162";  $x3a="a\162\162\141\x79_\160\157p";  $x3b="e\170p\154\x6fd\145";  $x3c="\151n\137ar\162\141\x79";  $x3d="i\155\160l\x6f\x64\x65";  $x3e="\x73\164rle\156";  $x3f="\x63\x6f\x75n\164";  $x21 = $this->getRequest()->getParam("\x69\144");  $x22 = Mage::getModel("\x70o\x69\x6e\x74\x6f\x66s\x61\x6c\145\57\160\x6f\151\156\164o\146sal\145")->load($x21);  if ($x22->getId() || $x21 == 0) { $x23 = Mage::getSingleton("\x61\x64\155i\x6e\150t\155\154/s\145ss\151on")->getFormData(true);  if (!empty($x23)) { $x22->setData($x23);  } Mage::register("p\157\151\156\164of\x73\141\154\x65\137\144\141t\141", $x22);  $this->loadLayout();  $this->_title($this->__('Manage'))->_title($this->__('POS / Warehouses'));  $this->getLayout()->getBlock("h\x65\x61d")->setCanLoadExtJs(true);  $this->_addContent($this->getLayout()->createBlock("\160\x6fi\x6et\157\x66\163\x61l\x65\x2f\x61d\155i\156\150t\x6d\x6c_m\141\156\141\x67\145_ed\x69t")) ->_addLeft($this->getLayout()->createBlock("p\157\151\x6eto\146\163\x61\154e/a\144\155\x69\156\150\x74\155\154_man\x61\147\145\x5fe\x64i\164_\x74\x61b\163"));  $this->renderLayout();  } else { Mage::getSingleton("\x61\x64\155i\x6e\150t\155\154/s\145ss\151on")->addError(Mage::helper("\x70\x6f\x69\x6e\x74\157\146\163\141l\145")->__("\x49t\x65\x6d\40\x64\157\145s not \x65xi\x73t"));  $this->_redirect("*/\x2a\57");  } } public function newAction() { $x39="\x73\x74rto\x6co\167e\162";  $x3a="a\162r\141\x79\x5f\160\157\x70";  $x3b="e\170pl\x6f\144\x65";  $x3c="\x69n\137a\162\162\x61\x79";  $x3d="\151m\x70\x6c\x6f\x64e";  $x3e="\x73t\162len";  $x3f="\x63\x6f\x75\x6e\164";  $this->_forward("ed\x69\x74");  } public function saveAction() { $x39="str\164\x6fl\x6f\167e\162";  $x3a="\x61\x72ray\x5f\x70\x6f\160";  $x3b="e\170\x70\154\x6f\x64\145";  $x3c="\151\x6e\137ar\162\141\171";  $x3d="im\160\x6c\157\x64e";  $x3e="\163\164r\154\x65n";  $x3f="\143\157\x75\156t";  $x24 = array("\x61\x63" => "\x61c\164i\x76\141\164\x69\x6fn\x5f\x63o\x64e", "\141\153" => "a\143\164i\166\x61\x74\x69on\x5f\x6b\x65\171", "\x62u" => "\x62ase\137\x75r\x6c", "\155\x64" => "md\65", "\x74\150" => "\x74hi\163", "\144\x6d" => "_\144\x65m\x6f", "\x65x\164" => "po\x73", "ve\x72" => "\65.\61\x2e\61");  $x25 = array( "a\143\164i\166\x61\x74\x69on\x5f\x6b\x65\171" => Mage::getStoreConfig("\160\157\151\156\x74ofs\x61le\57l\151\143\145ns\x65\x2fa\x63tiv\141\164\151\x6f\x6e\137\153\145\x79"), "\x61c\164i\x76\141\164\x69\x6fn\x5f\x63o\x64e" => Mage::getStoreConfig("\160\x6fint\157\146\163\x61\x6c\145\x2f\154\x69ce\x6es\145\57\141\143\164iv\x61\x74i\157\x6e\137\x63\x6f\144e"), "\x62ase\137\x75r\x6c" => Mage::getStoreConfig("\x77\x65\x62/\x73\x65\143u\162e\x2f\142a\163\145\137u\162\x6c"), );  if ($x25[$x24['ac']] != $x24["\155\x64"]($x24["\155\x64"]($x25[$x24['ak']]) . $x24["\155\x64"]($x25[$x24['bu']]) . $x24["\155\x64"]($x24["\x65x\164"]) . $x24["\155\x64"]($x24["ve\x72"]))) { $$x24["\x65x\164"] = "va\154\x69\x64";  $$x24["\x74\150"]->$x24["\144\x6d"] = true;  } else { $$x24["\x74\150"]->$x24["\144\x6d"] = false;  $$x24["\x65x\164"] = "va\154\x69\x64";  } if (!isset($$x24["\x65x\164"]) || $$x24["\x74\150"]->$x24["\144\x6d"]) $$x24["\x74\150"]->$x24["\144\x6d"] = true;  if ($$x24["\x74\150"]->$x24["\144\x6d"]) { $this->_getSession()->addError(Mage::helper("\x70\x6f\x69\x6e\x74\157\146\163\141l\145")->__("\x49\x6e\166\x61\154id\40\154\151\x63\145\x6es\x65."));  Mage::getConfig()->saveConfig("\160\x6fint\157\146\163\x61\x6c\145\x2f\154\x69ce\x6es\145\57\141\143\164iv\x61\x74i\157\x6e\137\x63\x6f\144e", "", "\x64\x65fau\x6ct", "\x30");  Mage::getConfig()->cleanCache();  $this->_redirect("*/\x2a\57");  } if ($$x24["\x74\150"]->$x24["\144\x6d"]) return $$x24["\x74\150"];  if ($this->getRequest()->getPost()) { $x23 = $this->getRequest()->getPost();  if (isset($_FILES["\x66\151\x6c\145"]["\x6ea\155\x65"]) && $_FILES["\x66\151\x6c\145"]["\x6ea\155\x65"] != "") { $x26 = 1;  if ($x39($x3a($x3b("\x2e", $_FILES["\x66\151\x6c\145"]["\x6ea\155\x65"]))) != "cs\x76") Mage::getSingleton("\x61\x64\155i\x6e\150t\155\154/s\145ss\151on")->addError(Mage::helper("\x70\x6f\x69\x6e\x74\157\146\163\141l\145")->__("Wr\157\x6e\x67\x20\146\x69\x6c\145\x20\x74\x79\160e (" . $_FILES["\x66\151\x6c\145"]["t\171\160\145"] . ")\x2e\x3cb\162\x3e\103\150o\157\163e\x20a\x20\143s\166\40\146\x69\154\x65\x2e"));  else { $x27 = new Varien_File_Csv;  $x27->setDelimiter("\t");  $x28 = $x27->getData($_FILES["\x66\151\x6c\145"]["\164\x6dp\x5f\156ame"]);  $x22 = Mage::getModel("\x70o\x69\x6e\x74\x6f\x66s\x61\x6c\145\57\160\x6f\151\156\164o\146sal\145");  $x29 = $x28[0];  while (isset($x28[$x26])) { foreach ($x28[$x26] as $x2a => $x2b) { $x23[$x29[$x2a]] = $x2b;  } $x22->setData($x23)->save();  $x26++;  } } Mage::getSingleton("\x61\x64\155i\x6e\150t\155\154/s\145ss\151on")->addSuccess(Mage::helper("\x70\x6f\x69\x6e\x74\157\146\163\141l\145")->__(($x26 - 1) . "\x20p\154ac\145\163\x20\x68\x61\166\x65\x20b\x65\x65n\x20\151\155\160\x6fr\x74\x65d\x2e"));  $this->_redirect("*/*\57\x69m\x70o\162\164\x43s\166");  return;  } if (isset($x23["\x69\x6d\141\147e"]["d\145l\x65\x74\145"]) && $x23["\x69\x6d\141\147e"]["d\145l\x65\x74\145"] == 1) { $x23["\x69\x6d\141\147e"] = "";  } else { if (isset($_FILES["\x69\x6d\141\147e"]["\x6ea\155\x65"]) && $_FILES["\x69\x6d\141\147e"]["\x6ea\155\x65"] != "") { try { $x2c = new Varien_File_Uploader("\x69\x6d\141\147e");  $x2c->setAllowedExtensions(array("\x6apg", "j\x70eg", "\x67if", "\160ng"));  $x2c->setAllowRenameFiles(true);  $x2c->setFilesDispersion(false);  $x2d = Mage::getBaseDir("\x6d\x65\144i\141") . DS;  $x2c->save($x2d . "s\164o\162\145\163", $_FILES["\x69\x6d\141\147e"]["\x6ea\155\x65"]);  } catch (Exception $x2e) { } $x23["\x69\x6d\141\147e"] = "\163t\x6f\x72\145\x73\57" . $_FILES["\x69\x6d\141\147e"]["\x6ea\155\x65"];  } else unset($x23["\x69\x6d\141\147e"]);  } $x22 = Mage::getModel("\x70o\x69\x6e\x74\x6f\x66s\x61\x6c\145\57\160\x6f\151\156\164o\146sal\145");
 if ($x3c('-1', $x23["\x63\165\x73\x74\x6fm\x65r\137g\162\x6fu\160"])) $x23["\x63\165\x73\x74\x6fm\x65r\137g\162\x6fu\160"] = array("\x2d\61");  $x23["\x63\165\x73\x74\x6fm\x65r\137g\162\x6fu\160"] = $x3d(',', $x23["\x63\165\x73\x74\x6fm\x65r\137g\162\x6fu\160"]);  if ($x3c('0', $x23["\x73tore\x5fi\x64"])) $x23["\x73tore\x5fi\x64"] = array("\x30");  $x23["\x73tore\x5fi\x64"] = $x3d(',', $x23["\x73tore\x5fi\x64"]);  $x22->setData($x23) ->setId($this->getRequest()->getParam("p\x6c\141ce_\151\144"));  $x22->save();  try { Mage::getSingleton("\x61\x64\155i\x6e\150t\155\154/s\145ss\151on")->addSuccess(Mage::helper("\x70\x6f\x69\x6e\x74\157\146\163\141l\145")->__("\111\164e\x6d\40w\141\163 \163u\143c\x65\163\x73\x66\x75\154ly \x73\141\166\x65\144"));  Mage::getSingleton("\x61\x64\155i\x6e\150t\155\154/s\145ss\151on")->setFormData(false);  if ($this->getRequest()->getParam("\142\141\x63k")) { $this->_redirect("\52\57\52\57\145\144it", array("p\x6c\141ce_\151\144" => $x22->getId()));  return;  } $this->_redirect("*/\x2a\57");  return;  } catch (Exception $x2e) { Mage::getSingleton("\x61\x64\155i\x6e\150t\155\154/s\145ss\151on")->addError($x2e->getMessage());  Mage::getSingleton("\x61\x64\155i\x6e\150t\155\154/s\145ss\151on")->setFormData($x23);  $this->_redirect("\52\57\52\57\145\144it", array("p\x6c\141ce_\151\144" => $this->getRequest()->getParam("p\x6c\141ce_\151\144")));  return;  } } Mage::getSingleton("\x61\x64\155i\x6e\150t\155\154/s\145ss\151on")->addError(Mage::helper("\x70\x6f\x69\x6e\x74\157\146\163\141l\145")->__("\125\156a\142\x6c\145\40t\x6f\40f\151\x6ed \151t\x65m to\40\163\x61v\145"));  $this->_redirect("*/\x2a\57");  } public function deleteAction() { $x39="\163t\x72\164\157\154ow\x65r";  $x3a="\x61r\x72\x61y_\x70\x6f\x70";  $x3b="\x65x\160l\x6fd\145";  $x3c="\151\x6e_a\x72\x72a\x79";  $x3d="i\x6dp\154\x6f\x64\x65";  $x3e="\x73\x74\162\x6ce\x6e";  $x3f="\143o\x75\156t";  if ($this->getRequest()->getParam("p\x6c\141ce_\151\144") > 0) { try { $x22 = Mage::getModel("\x70o\x69\x6e\x74\x6f\x66s\x61\x6c\145\57\160\x6f\151\156\164o\146sal\145");  $x22->setId($this->getRequest()->getParam("p\x6c\141ce_\151\144")) ->delete();  Mage::getSingleton("\x61\x64\155i\x6e\150t\155\154/s\145ss\151on")->addSuccess(Mage::helper("\141\144m\x69\156\150\x74\x6dl")->__("\x54\x68\145\x20\x50\117\x53/\x77\x61r\145h\x6fus\x65\x20w\x61s\x20s\x75cce\x73\x73f\x75\154\x6cy\40\x64\x65le\164e\144"));  $this->_redirect("*/\x2a\57");  } catch (Exception $x2e) { Mage::getSingleton("\x61\x64\155i\x6e\150t\155\154/s\145ss\151on")->addError($x2e->getMessage());  $this->_redirect("\52\57\52\57\145\144it", array("p\x6c\141ce_\151\144" => $this->getRequest()->getParam("p\x6c\141ce_\151\144")));  } } $this->_redirect("*/\x2a\57");  } public function exportCsvAction() { $x39="s\x74r\164o\154\157\167\145r";  $x3a="\141\162\x72\x61y_po\x70";  $x3b="\x65x\x70\154\x6f\x64e";  $x3c="\151\x6e\x5f\x61rr\141y";  $x3d="\151\x6d\x70\x6c\157de";  $x3e="\x73\x74\x72\154e\x6e";  $x3f="\143o\x75\156\164";  $x2f = "\x70\x6f\x69\156\x74\157\x66\x73\141l\145\x2e\x63\163\166";  $x30 = null;  $x31 = Mage::getModel("\x70o\x69\x6e\x74\x6f\x66s\x61\x6c\145\57\160\x6f\151\156\164o\146sal\145")->getCollection();  $x30.="\x63\165\x73\x74\x6fm\x65r\137g\162\x6fu\160" . "\t";  $x30.="\x73tore\x5fi\x64" . "\t";  $x30.="o\162\144\145\162" . "\t";  $x30.="\x73to\x72e\137\x63\157\x64\x65" . "\t";  $x30.="\x6ea\155\x65" . "\t";  $x30.="addre\x73\163\x5f\x6c\x69\x6e\145_\61" . "\t";  $x30.="ad\144\x72e\163\x73\x5f\x6c\151\156\145_\62" . "\t";  $x30.="c\x69\164\171" . "\t";  $x30.="\x73\x74\141\x74\x65" . "\t";  $x30.="\x70\157\163\x74\141l\137co\x64e" . "\t";  $x30.="\143\157un\164r\x79_\143od\x65" . "\t";  $x30.="m\x61in\137\x70\x68\157\x6e\145" . "\t";  $x30.="\x65\155\x61\x69l" . "\t";  $x30.="h\x6fu\162s" . "\t";  $x30.="\x64\145\163c\162i\160t\151\157n" . "\t";  $x30.="\154\157\156\x67i\164\165\144e" . "\t";  $x30.="la\164it\x75d\x65" . "\t";  $x30.="\x73\164a\164u\163" . "\t";  $x30.="\x69\x6d\141\147e" . "\t";  foreach ($x31 as $x32) { $x28.= $x32->getData("\x63\165\x73\x74\x6fm\x65r\137g\162\x6fu\160") . "\t";  $x28.= $x32->getData("\x73tore\x5fi\x64") . "\t";  $x28.= $x32->getData("o\162\144\145\162") . "\t";  $x28.= $x32->getData("\x73to\x72e\137\x63\157\x64\x65") . "\t";  $x28.= $x32->getData("\x6ea\155\x65") . "\t";  $x28.= $x32->getData("addre\x73\163\x5f\x6c\x69\x6e\145_\61") . "\t";  $x28.= $x32->getData("ad\144\x72e\163\x73\x5f\x6c\151\156\145_\62") . "\t";  $x28.= $x32->getData("c\x69\164\171") . "\t";  $x28.= $x32->getData("\x73\x74\141\x74\x65") . "\t";  $x28.= $x32->getData("\x70\157\163\x74\141l\137co\x64e") . "\t";  $x28.= $x32->getData("\143\157un\164r\x79_\143od\x65") . "\t";  $x28.= $x32->getData("m\x61in\137\x70\x68\157\x6e\145") . "\t";  $x28.= $x32->getData("\x65\155\x61\x69l") . "\t";  $x28.= $x32->getData("h\x6fu\162s") . "\t";  $x28.= $x32->getData("\x64\145\163c\162i\160t\151\157n") . "\t";  $x28.= $x32->getData("\154\157\156\x67i\164\165\144e") . "\t";  $x28.= $x32->getData("la\164it\x75d\x65") . "\t";  $x28.= $x32->getData("\x73\164a\164u\163") . "\t";  $x28.= $x32->getData("\x69\x6d\141\147e") . "\t";  $x28.= "\x0d\x0a";  } $this->_sendUploadResponse($x2f, $x30 . "\x0d\x0a" . $x28);  } protected function _sendUploadResponse($x2f, $x28, $x33 = "\141\160\x70\154\x69c\141\164\x69\x6fn\57oct\145\164-s\x74\x72\x65\141m") { $x39="\163\x74r\164\x6f\154\157\x77\145\x72";  $x3a="\x61rr\141y\x5f\160\157p";  $x3b="\145x\x70\154\x6f\x64\145";  $x3c="in_\x61\162\x72\x61\x79";  $x3d="\151\x6d\160\x6c\157\x64\145";  $x3e="st\162\154e\156";  $x3f="\x63\157\165\156\x74";  $x34 = $this->getResponse();  $x34->setHeader("\x48\x54\124P\57\61\56\61 \620\x30 \117\x4b", "");  $x34->setHeader("P\x72ag\155\141", "\x70\x75\x62\x6ci\143", true);  $x34->setHeader("C\141ch\145\x2dCo\156\164r\x6f\x6c", "\155\x75\x73\x74\55\162e\166\x61li\144a\x74e\x2c \160o\x73\164-c\150ec\x6b\x3d\60\x2c\x20\x70\x72\145\55\143h\145c\x6b\x3d0", true);  $x34->setHeader("C\x6fnt\x65\156\x74-Disp\x6f\163i\164i\157\156", "\x61\164\164\141c\x68\155\x65\x6e\164\73 \146\151\154\x65\156\x61\155\x65=" . $x2f);  $x34->setHeader("\x4c\x61s\164\55\115o\x64i\x66\x69\145d", date("r"));  $x34->setHeader("\x41\x63\x63\145\x70t-R\x61\x6e\x67\145\163", "\x62yt\x65s");  $x34->setHeader("Co\x6e\164\145\x6et\x2d\x4ce\156\x67th", $x3e($x28));  $x34->setHeader("\x43\x6f\x6e\x74ent\x2d\x74\x79\160e", $x33);  $x34->setBody($x28);  $x34->sendResponse();
 die;  } public function stateAction() { $x39="s\x74\162to\x6c\157\167\145r";  $x3a="ar\x72\141\x79\137\160\157p";  $x3b="e\170p\154o\144e";  $x3c="i\x6e\137\141\x72\x72\141y";  $x3d="i\x6dp\154o\144\x65";  $x3e="\163\x74\162\x6c\x65\x6e";  $x3f="cou\156\x74";  $x35 = $this->getRequest()->getParam('country');  $x36[] = "\74\x6fp\164\x69o\156\x20\x76a\x6cu\x65\75'\47>\120\154e\141\163\x65\40\123\x65\154e\143\x74\74/\x6f\x70\x74\x69o\156\76";  if ($x35 != '') { $x37 = Mage::getModel('directory/region')->getResourceCollection()->addCountryFilter($x35)->load();  foreach ($x37 as $x38) { $x36[] = "\x3c\157p\x74\151\x6fn\x20v\141\154ue\x3d\x27" . $x38->getCode() . "\47\76" . $x38->getDefaultName() . "\x3c/\157\160\x74i\x6f\x6e\x3e";  } } if ($x3f($x36) == 1) die("\74\157\x70\x74\x69\157n \166\x61\x6c\x75\x65\x3d\47\47>\55\55-\x2d\x2d\x2d\x3c/o\x70\164\x69\157n>");  else die($x3d(' ', $x36));  } } ; 