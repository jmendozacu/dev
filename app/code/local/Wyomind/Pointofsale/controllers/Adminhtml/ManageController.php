<?php class Wyomind_Pointofsale_Adminhtml_ManageController extends Mage_Adminhtml_Controller_Action { protected function _initAction() { $x34="strt\157l\x6fw\x65\162";
 $x35="a\x72r\141\171\x5f\x70op";  $x36="e\170\x70\x6c\157\x64e";  $x37="\x69\156_\x61r\162\x61\171";  $x38="\x69m\160\154\157\144e";  $x39="\x73\164rl\x65n";  $x3a="c\x6fun\164";  $this->_title($this->__('Manage'))->_title($this->__('POS / Warehouses'));  $this->loadLayout() ->_setActiveMenu("\x73a\154\145\163\x2f\160o\151\156\x74\157f\x73\x61\154e");  return $this;  } protected function _isAllowed() { $x34="strto\x6c\157\167\145\x72";  $x35="\x61\162r\x61\x79\137\160\157p";  $x36="\145\170\160\x6c\157\144\x65";  $x37="\x69n_\x61\x72r\x61\x79";  $x38="i\x6d\160\x6c\157d\145";  $x39="s\164\162l\145n";  $x3a="\x63\x6funt";  return Mage::getSingleton('admin/session')->isAllowed('sales/pointofsale');  } public function indexAction() { $x34="\x73t\x72t\x6f\154\157w\145r";  $x35="\141\162\x72\x61\171\137\160\x6f\160";  $x36="\x65\x78plo\x64e";  $x37="\x69\156\137a\x72ra\171";  $x38="\151mplo\144e";  $x39="\x73tr\154\145\x6e";  $x3a="\x63o\165\156t";  $this->_initAction() ->renderLayout();  } public function importCsvAction() { $x34="\x73\x74r\164ol\x6f\167e\x72";  $x35="\x61\162\162a\171\137p\x6fp";  $x36="\145\170p\x6c\x6f\144\145";  $x37="\151\156\x5fa\162\162\x61\x79";  $x38="i\x6d\x70l\157d\x65";  $x39="s\164r\154\x65\x6e";  $x3a="\x63\x6funt";  $this->loadLayout();  $this->_setActiveMenu("\x73a\154\145\163\x2f\160o\151\156\x74\157f\x73\x61\154e");  $this->_addBreadcrumb(Mage::helper("\x70o\x69\156\164ofs\x61le")->__("\120\x4f\123\40\x2f \x57\141r\145\150\x6f\165\x73\145\x73"), ("\120\x4f\123\40\x2f \x57\141r\145\150\x6f\165\x73\145\x73"));  $this->getLayout()->getBlock("h\x65ad")->setCanLoadExtJs(true);  $this->_addContent($this->getLayout()->createBlock("p\x6f\151n\164\x6ffs\x61\154\x65/adm\x69\x6ehtml\137\155a\x6e\x61\x67\x65\137\x69\x6d\160\x6fr\x74")) ->_addLeft($this->getLayout()->createBlock("\160o\x69\156to\146s\141\x6c\145\57\x61\144\155\x69\x6e\x68tm\154\x5f\x6d\141\156\x61ge\x5f\151mp\x6f\x72\x74\x5fta\x62\163"));  $this->renderLayout();  } public function editAction() { $x34="\163trt\157\x6c\157\167er";  $x35="a\x72ra\x79\x5fp\157\x70";  $x36="\x65\x78\160lod\x65";  $x37="in_\141r\162\141\171";  $x38="\151\x6d\160l\157\144\145";  $x39="\163\164\162\154e\156";  $x3a="\143\x6f\165\156\164";  $x1c = $this->getRequest()->getParam("id");  $x1d = Mage::getModel("p\x6f\x69\156\164\157\146\163\x61l\145\57\160o\151\x6e\164o\146\163\141l\145")->load($x1c);  if ($x1d->getId() || $x1c == 0) { $x1e = Mage::getSingleton("\141\x64\155\x69\x6eh\x74ml\57s\x65\x73\x73\151\157\156")->getFormData(true);  if (!empty($x1e)) { $x1d->setData($x1e);  } Mage::register("\160o\x69\x6et\157\x66\x73\141le_d\141\164a", $x1d);  $this->loadLayout();  $this->_title($this->__('Manage'))->_title($this->__('POS / Warehouses'));  $this->getLayout()->getBlock("h\x65ad")->setCanLoadExtJs(true);  $this->_addContent($this->getLayout()->createBlock("\x70o\151\156tof\x73\x61\x6ce/\x61dmi\156\x68\x74m\x6c_m\x61\156\x61g\145_e\x64it")) ->_addLeft($this->getLayout()->createBlock("p\157\151\156\x74of\163\141l\145\x2f\141\x64mi\x6e\150\x74\x6d\x6c\x5fm\141\x6e\x61\x67\x65\x5f\x65d\x69t\137\164\x61\x62\163"));  $this->renderLayout();  } else { Mage::getSingleton("\141\x64\155\x69\x6eh\x74ml\57s\x65\x73\x73\151\157\156")->addError(Mage::helper("\x70o\x69\156\164ofs\x61le")->__("\x49\164em\x20d\157\x65\163 n\x6f\x74 ex\x69s\x74"));  $this->_redirect("\x2a\57*\x2f");  } } public function newAction() { $x34="\x73\164\x72t\157\x6co\167e\162";  $x35="a\162\x72\141\171_\x70\x6f\x70";  $x36="exp\x6c\157\144e";  $x37="in\x5f\141\162\162ay";  $x38="\x69\x6d\x70\x6c\157de";  $x39="\163\164rl\x65\156";  $x3a="\x63\157un\x74";  $this->_forward("\145\144\151\164");  } public function saveAction() { $x34="\163\x74\162\x74o\154\x6f\x77e\162";  $x35="\141\162\x72ay\x5f\x70\157\x70";  $x36="e\x78\160\154od\x65";  $x37="\x69\x6e_a\162\162\x61\x79";  $x38="\151\x6d\160l\157\144\x65";  $x39="\x73\x74\x72\x6ce\156";  $x3a="\x63\157un\164";  $x1f = array("\141\143" => "\141ctiv\141\x74i\x6f\x6e\x5fco\144e", "a\153" => "ac\x74iva\164i\157\x6e\137k\145y", "\x62\165" => "\142\x61\x73\x65\137u\x72\154", "\x6dd" => "\x6d\144\65", "\164h" => "\x74\x68i\x73", "\x64m" => "_de\155o", "\x65\x78\x74" => "\x70\157\163", "\166\145\x72" => "\65.\61\x2e\63");  $x20 = array( "ac\x74iva\164i\157\x6e\137k\145y" => Mage::getStoreConfig("\160\157\151\x6et\x6f\x66s\141\x6c\145\x2fl\x69\x63\145\x6e\163\145/\141\x63\164i\166\x61\x74io\156\137\x6b\x65\x79"), "\141ctiv\141\x74i\x6f\x6e\x5fco\144e" => Mage::getStoreConfig("p\x6f\151n\164\x6f\x66s\x61\x6c\145\57l\151\143en\163\145\57\x61\143\x74\151\166a\164ion_co\x64e"), "\142\x61\x73\x65\137u\x72\154" => Mage::getStoreConfig("\x77\x65\142\x2f\x73e\143\165\x72e\57\142\141\163\x65\x5f\165r\x6c"), );  if ($x20[$x1f['ac']] != $x1f["\x6dd"]($x1f["\x6dd"]($x20[$x1f['ak']]) . $x1f["\x6dd"]($x20[$x1f['bu']]) . $x1f["\x6dd"]($x1f["\x65\x78\x74"]) . $x1f["\x6dd"]($x1f["\166\145\x72"]))) { ${$x1f["\x65\x78\x74"]} = "\x76\141\x6ci\x64";  ${$x1f["\164h"]}->{$x1f["\x64m"]} = true;  } else { ${$x1f["\164h"]}->{$x1f["\x64m"]} = false;  ${$x1f["\x65\x78\x74"]} = "\x76\141\x6ci\x64";  } if (!isset(${$x1f["\x65\x78\x74"]}) || ${$x1f["\164h"]}->{$x1f["\x64m"]}) ${$x1f["\164h"]}->{$x1f["\x64m"]} = true;  if (${$x1f["\164h"]}->{$x1f["\x64m"]}) { $this->_getSession()->addError(Mage::helper("\x70o\x69\156\164ofs\x61le")->__("I\156\x76a\154\151d\x20\x6cicen\163\x65\56"));  Mage::getConfig()->saveConfig("p\x6f\151n\164\x6f\x66s\x61\x6c\145\57l\151\143en\163\145\57\x61\143\x74\151\166a\164ion_co\x64e", "", "d\145\x66\x61\165l\164", "\x30");  Mage::getConfig()->cleanCache();  $this->_redirect("\x2a\57*\x2f");  } if (${$x1f["\164h"]}->{$x1f["\x64m"]}) return ${$x1f["\164h"]};  if ($this->getRequest()->getPost()) { $x1e = $this->getRequest()->getPost();  if (isset($_FILES["\x66\151\154\145"]["\x6e\141m\x65"]) && $_FILES["\x66\151\154\145"]["\x6e\141m\x65"] != "") { $x21 = 1;  if ($x34($x35($x36(".", $_FILES["\x66\151\154\145"]["\x6e\141m\x65"]))) != "\x63\163\x76") Mage::getSingleton("\141\x64\155\x69\x6eh\x74ml\57s\x65\x73\x73\151\157\156")->addError(Mage::helper("\x70o\x69\156\164ofs\x61le")->__("\x57\x72\x6fn\147 \x66\151\154\145\40t\x79p\x65\x20(" . $_FILES["\x66\151\154\145"]["\x74\171\x70\x65"] . "\51.\x3c\142\162\x3eC\150\157o\x73\x65 \141\40\143s\166\40\146\151l\x65."));  else { $x22 = new Varien_File_Csv;  $x22->setDelimiter("\t");  $x23 = $x22->getData($_FILES["\x66\151\154\145"]["\164\155\x70_\156\x61\155\x65"]);  $x1d = Mage::getModel("p\x6f\x69\156\164\157\146\163\x61l\145\57\160o\151\x6e\164o\146\163\141l\145");  $x24 = $x23[0];  while (isset($x23[$x21])) { foreach ($x23[$x21] as $x25 => $x26) { $x1e[$x24[$x25]] = $x26;  } $x1d->setData($x1e)->save();  $x21++;  } } Mage::getSingleton("\141\x64\155\x69\x6eh\x74ml\57s\x65\x73\x73\151\157\156")->addSuccess(Mage::helper("\x70o\x69\156\164ofs\x61le")->__(($x21 - 1) . "\x20\160\x6c\141\x63\x65\x73\x20h\141\166\145\x20\x62ee\156\x20\151\155\x70\157r\x74\x65\144\x2e"));  $this->_redirect("\52\x2f*\57\151\x6dpo\162t\x43\163v");  return;  } if (isset($x1e["i\x6d\x61g\x65"]["de\154e\164\x65"]) && $x1e["i\x6d\x61g\x65"]["de\154e\164\x65"] == 1) { $x1e["i\x6d\x61g\x65"] = "";  } else { if (isset($_FILES["i\x6d\x61g\x65"]["\x6e\141m\x65"]) && $_FILES["i\x6d\x61g\x65"]["\x6e\141m\x65"] != "") { try { $x27 = new Varien_File_Uploader("i\x6d\x61g\x65");
 $x27->setAllowedExtensions(array("\152\x70\147", "\152\160e\x67", "g\151f", "\x70\x6e\x67"));  $x27->setAllowRenameFiles(true);  $x27->setFilesDispersion(false);  $x28 = Mage::getBaseDir("\155edi\x61") . DS;  $x27->save($x28 . "\x73\164\157r\145\163", $_FILES["i\x6d\x61g\x65"]["\x6e\141m\x65"]);  } catch (Exception $x29) { } $x1e["i\x6d\x61g\x65"] = "\163\x74or\x65\x73\57" . $_FILES["i\x6d\x61g\x65"]["\x6e\141m\x65"];  } else unset($x1e["i\x6d\x61g\x65"]);  } $x1d = Mage::getModel("p\x6f\x69\156\164\157\146\163\x61l\145\57\160o\151\x6e\164o\146\163\141l\145");  if ($x37('-1', $x1e["\143us\x74om\145\162_\147ro\x75p"])) $x1e["\143us\x74om\145\162_\147ro\x75p"] = array("\x2d\61");  $x1e["\143us\x74om\145\162_\147ro\x75p"] = $x38(',', $x1e["\143us\x74om\145\162_\147ro\x75p"]);  if ($x37('0', $x1e["\163\164o\162\x65\137i\x64"])) $x1e["\163\164o\162\x65\137i\x64"] = array("\x30");  $x1e["\163\164o\162\x65\137i\x64"] = $x38(',', $x1e["\163\164o\162\x65\137i\x64"]);  $x1d->setData($x1e) ->setId($this->getRequest()->getParam("p\x6ca\143e\x5fi\144"));  $x1d->save();  try { Mage::getSingleton("\141\x64\155\x69\x6eh\x74ml\57s\x65\x73\x73\151\157\156")->addSuccess(Mage::helper("\x70o\x69\156\164ofs\x61le")->__("\111\x74em \167a\x73\x20\163uc\x63\x65\163\x73\x66\x75\x6c\x6c\x79\x20\x73\x61\x76\x65d"));  Mage::getSingleton("\141\x64\155\x69\x6eh\x74ml\57s\x65\x73\x73\151\157\156")->setFormData(false);  if ($this->getRequest()->getParam("\x62\x61\143\x6b")) { $this->_redirect("\x2a\57\52\x2fe\144\x69\x74", array("p\x6ca\143e\x5fi\144" => $x1d->getId()));  return;  } $this->_redirect("\x2a\57*\x2f");  return;  } catch (Exception $x29) { Mage::getSingleton("\141\x64\155\x69\x6eh\x74ml\57s\x65\x73\x73\151\157\156")->addError($x29->getMessage());  Mage::getSingleton("\141\x64\155\x69\x6eh\x74ml\57s\x65\x73\x73\151\157\156")->setFormData($x1e);  $this->_redirect("\x2a\57\52\x2fe\144\x69\x74", array("p\x6ca\143e\x5fi\144" => $this->getRequest()->getParam("p\x6ca\143e\x5fi\144")));  return;  } } Mage::getSingleton("\141\x64\155\x69\x6eh\x74ml\57s\x65\x73\x73\151\157\156")->addError(Mage::helper("\x70o\x69\156\164ofs\x61le")->__("\125\x6e\141bl\145 \164\x6f f\151nd\x20i\x74\145\x6d to\40\x73\x61\x76\x65"));  $this->_redirect("\x2a\57*\x2f");  } public function deleteAction() { $x34="\163\164\162\x74\157\154\x6f\167\145r";  $x35="a\162r\141y\137\x70\x6fp";  $x36="\x65\x78p\154\x6fd\x65";  $x37="\151\156_\x61r\x72a\x79";  $x38="\x69\155p\154o\x64\x65";  $x39="\163\164\x72l\145\156";  $x3a="c\157\165\x6et";  if ($this->getRequest()->getParam("p\x6ca\143e\x5fi\144") > 0) { try { $x1d = Mage::getModel("p\x6f\x69\156\164\157\146\163\x61l\145\57\160o\151\x6e\164o\146\163\141l\145");  $x1d->setId($this->getRequest()->getParam("p\x6ca\143e\x5fi\144")) ->delete();  Mage::getSingleton("\141\x64\155\x69\x6eh\x74ml\57s\x65\x73\x73\151\157\156")->addSuccess(Mage::helper("\141\144\155\x69\x6eh\x74ml")->__("T\150\x65 \x50O\x53\x2f\167\x61r\145\150\x6f\165s\x65\x20\x77\x61\163 \163\x75\143\143\x65\x73sf\x75l\154\x79 d\x65l\x65t\x65d"));  $this->_redirect("\x2a\57*\x2f");  } catch (Exception $x29) { Mage::getSingleton("\141\x64\155\x69\x6eh\x74ml\57s\x65\x73\x73\151\157\156")->addError($x29->getMessage());  $this->_redirect("\x2a\57\52\x2fe\144\x69\x74", array("p\x6ca\143e\x5fi\144" => $this->getRequest()->getParam("p\x6ca\143e\x5fi\144")));  } } $this->_redirect("\x2a\57*\x2f");  } public function exportCsvAction() { $x34="\163\164\x72\164\157\154o\x77\145r";  $x35="\141\162\x72\141y_\x70\157\x70";  $x36="\x65xp\154o\x64\x65";  $x37="\151\156\137\141\162\x72\x61\171";  $x38="\151\155p\154o\144\x65";  $x39="\163t\162l\145\156";  $x3a="c\x6f\165\x6e\x74";  $x2a = "\160\x6fin\164o\x66\x73a\154\145.\143\163\x76";  $x2b = null;  $x2c = Mage::getModel("p\x6f\x69\156\164\157\146\163\x61l\145\57\160o\151\x6e\164o\146\163\141l\145")->getCollection();  $x2b.="\143us\x74om\145\162_\147ro\x75p" . "\t";  $x2b.="\163\164o\162\x65\137i\x64" . "\t";  $x2b.="o\162\144\145\162" . "\t";  $x2b.="s\164\x6fr\145_\143\157\x64\x65" . "\t";  $x2b.="\x6e\141m\x65" . "\t";  $x2b.="add\162\145\x73s\137\x6c\x69n\145\x5f\61" . "\t";  $x2b.="\141\x64\144\x72e\x73\163_l\x69\156\x65\137\62" . "\t";  $x2b.="\143\151\164y" . "\t";  $x2b.="\x73\x74\141\x74e" . "\t";  $x2b.="p\x6f\163\x74\x61l\x5fc\x6fde" . "\t";  $x2b.="co\165n\x74\162\171\137co\x64\x65" . "\t";  $x2b.="\x6d\141i\156_\x70ho\x6e\x65" . "\t";  $x2b.="\145\155\141\151l" . "\t";  $x2b.="\x68\157\165\x72\x73" . "\t";  $x2b.="\x64e\x73\143\x72ipt\151\x6fn" . "\t";  $x2b.="\154\157\156\x67\151tu\144\x65" . "\t";  $x2b.="\x6cat\151\164\165\144e" . "\t";  $x2b.="s\164\x61\x74\165\x73" . "\t";  $x2b.="i\x6d\x61g\x65" . "\t";  foreach ($x2c as $x2d) { $x23.= $x2d->getData("\143us\x74om\145\162_\147ro\x75p") . "\t";  $x23.= $x2d->getData("\163\164o\162\x65\137i\x64") . "\t";  $x23.= $x2d->getData("o\162\144\145\162") . "\t";  $x23.= $x2d->getData("s\164\x6fr\145_\143\157\x64\x65") . "\t";  $x23.= $x2d->getData("\x6e\141m\x65") . "\t";  $x23.= $x2d->getData("add\162\145\x73s\137\x6c\x69n\145\x5f\61") . "\t";  $x23.= $x2d->getData("\141\x64\144\x72e\x73\163_l\x69\156\x65\137\62") . "\t";  $x23.= $x2d->getData("\143\151\164y") . "\t";  $x23.= $x2d->getData("\x73\x74\141\x74e") . "\t";  $x23.= $x2d->getData("p\x6f\163\x74\x61l\x5fc\x6fde") . "\t";  $x23.= $x2d->getData("co\165n\x74\162\171\137co\x64\x65") . "\t";  $x23.= $x2d->getData("\x6d\141i\156_\x70ho\x6e\x65") . "\t";  $x23.= $x2d->getData("\145\155\141\151l") . "\t";  $x23.= $x2d->getData("\x68\157\165\x72\x73") . "\t";  $x23.= $x2d->getData("\x64e\x73\143\x72ipt\151\x6fn") . "\t";  $x23.= $x2d->getData("\154\157\156\x67\151tu\144\x65") . "\t";  $x23.= $x2d->getData("\x6cat\151\164\165\144e") . "\t";  $x23.= $x2d->getData("s\164\x61\x74\165\x73") . "\t";  $x23.= $x2d->getData("i\x6d\x61g\x65") . "\t";  $x23.= "\x0d\x0a";  } $this->_sendUploadResponse($x2a, $x2b . "\x0d\x0a" . $x23);  } protected function _sendUploadResponse($x2a, $x23, $x2e = "app\154\x69\x63\x61t\x69o\156\x2f\x6fc\164e\x74\x2ds\x74rea\155") { $x34="\x73tr\x74o\x6co\167e\x72";  $x35="\141r\162a\171\137\160\157p";  $x36="ex\160\x6co\x64e";  $x37="i\156\x5fa\162\x72a\x79";  $x38="\151\155\160\x6co\x64\145";  $x39="\x73\x74\x72\x6c\145\156";  $x3a="c\x6f\x75\156t";  $x2f = $this->getResponse();  $x2f->setHeader("\110\124\x54P\x2f\61\56\61\40\62\x30\60\x20\117K", "");  $x2f->setHeader("\x50r\141\147\155\x61", "\160u\x62\x6c\151\x63", true);
 $x2f->setHeader("\103\x61\143\x68e\55C\x6fnt\x72\x6f\154", "\155\x75\x73\164\55re\x76\141\x6cid\141\164e,\x20\x70\x6f\x73\164\55\x63h\x65\x63\153\x3d\60\54 pre\55\x63h\x65\143\x6b\x3d\60", true);  $x2f->setHeader("\x43on\x74e\x6e\x74-\x44\151\x73\x70\157\163\151t\151o\156", "\x61t\x74\x61\x63\150m\145n\x74\73\40\146\151\x6c\145\x6e\x61\155\x65\75" . $x2a);  $x2f->setHeader("\x4c\141s\164-\115\x6f\144\151fi\x65d", date("r"));  $x2f->setHeader("\101\143ce\160t\55R\x61n\x67\145\x73", "\142\x79\x74e\x73");  $x2f->setHeader("\103o\156\x74\145\156t-\114\145\x6e\x67\x74\150", $x39($x23));  $x2f->setHeader("Co\x6e\x74e\156t-\164\x79\160\145", $x2e);  $x2f->setBody($x23);  $x2f->sendResponse();  die;  } public function stateAction() { $x34="st\162\x74\157\x6c\157\167\x65r";  $x35="arr\x61\171\x5f\160\x6f\160";  $x36="\x65\170\160\x6co\x64e";  $x37="\151\x6e\x5far\x72\141\171";  $x38="\x69mp\154\157d\145";  $x39="\x73t\162\154\x65n";  $x3a="c\x6f\x75\x6et";  $x30 = $this->getRequest()->getParam('country');  $x31[] = "\74\157p\164\151\x6f\x6e \166\141\154\x75\145\x3d'\47\x3ePl\x65a\x73\x65\40\123\x65\154\x65\x63t\74/\157\x70\x74\x69\157\156>";  if ($x30 != '') { $x32 = Mage::getModel('directory/region')->getResourceCollection()->addCountryFilter($x30)->load();  foreach ($x32 as $x33) { $x31[] = "\x3co\160\x74\151\157n va\154\x75\145\75\47" . $x33->getCode() . "\x27\x3e" . $x33->getDefaultName() . "\74\57\x6fp\164i\157n\x3e";  } } if ($x3a($x31) == 1) die("\74option\40\x76\x61\x6c\x75e\x3d'\47\76\55\x2d--\55\x2d\x3c/\x6fpt\151o\x6e\x3e");  else die($x38(' ', $x31));  } } ; 