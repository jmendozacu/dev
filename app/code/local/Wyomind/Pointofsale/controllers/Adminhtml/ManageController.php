<?php class Wyomind_Pointofsale_Adminhtml_ManageController extends Mage_Adminhtml_Controller_Action { protected function _initAction() { $x55="\x73t\x72\164ol\x6fwer";
 $x56="\x61\162r\x61y_p\157\x70";  $x57="\x65\170\160lo\144e";  $x58="i\156\137\x61\x72\162a\171";  $x59="im\x70\x6c\157d\x65";  $x5a="s\164\x72l\145n";  $x5b="\143\x6fun\164";  $this->_title($this->__('Manage'))->_title($this->__('POS / Warehouses'));  $this->loadLayout() ->_setActiveMenu("s\x61l\x65\x73/\160\157i\x6e\164o\x66\x73a\x6c\145");  return $this;  } protected function _isAllowed() { $x55="\163\164\x72\x74\157\x6c\157w\x65r";  $x56="\x61r\x72\x61\171\137\160o\160";  $x57="ex\x70l\157\144e";  $x58="\x69\156_\x61r\x72\141\x79";  $x59="\151\x6d\x70\x6c\x6f\x64e";  $x5a="\163\x74\x72\154\145\156";  $x5b="\x63\157\x75\x6e\x74";  return Mage::getSingleton('admin/session')->isAllowed('sales/pointofsale');  } public function indexAction() { $x55="\x73tr\164o\x6co\167\x65r";  $x56="ar\x72\x61y\137\x70op";  $x57="\x65\x78p\x6co\144e";  $x58="\x69\x6e_\x61\162r\x61\x79";  $x59="\151m\160\154\157d\x65";  $x5a="\x73\164\162\x6c\145n";  $x5b="\143\157\165\156t";  $this->_initAction() ->renderLayout();  } public function importCsvAction() { $x55="\163t\162t\157lo\167e\x72";  $x56="\x61\x72\162ay\x5f\x70\x6fp";  $x57="\145\170\160l\157d\145";  $x58="\x69\x6e\x5f\141r\162\x61\171";  $x59="\151m\160\154\x6f\144e";  $x5a="\163\164\x72\x6c\145\156";  $x5b="\x63o\x75\156\x74";  $this->loadLayout();  $this->_setActiveMenu("s\x61l\x65\x73/\160\157i\x6e\164o\x66\x73a\x6c\145");  $this->_addBreadcrumb(Mage::helper("p\157i\156\x74of\163\141le")->__("\120O\x53\x20/\40\x57\x61\x72\x65\150ouse\x73"), ("\120O\x53\x20/\40\x57\x61\x72\x65\150ouse\x73"));  $this->getLayout()->getBlock("\150\145\141\144")->setCanLoadExtJs(true);  $this->_addContent($this->getLayout()->createBlock("\x70\157i\x6et\x6f\x66\163\x61\x6c\145\x2f\141dm\x69n\150\x74ml\x5f\155ana\147\x65\x5fim\160\157\162t")) ->_addLeft($this->getLayout()->createBlock("\x70oi\156to\x66s\141\x6ce/\x61\144\x6di\156\x68\164\x6dl\x5fm\x61\156\141ge\x5f\151\155\160\157\162\x74\x5f\164\x61\x62\x73"));  $this->renderLayout();  } public function editAction() { $x55="\163\164r\164\x6fl\157\x77\145\162";  $x56="ar\x72\x61\171\137pop";  $x57="\145\x78\x70l\157d\x65";  $x58="i\156\x5f\141rra\171";  $x59="\x69\x6d\160l\x6fd\145";  $x5a="\x73t\162\154\x65n";  $x5b="\x63ou\156\x74";  $x3d = $this->getRequest()->getParam("\151d");  $x3e = Mage::getModel("p\157\x69n\164\157fsal\x65\57p\157\x69n\164\157\146\x73al\145")->load($x3d);  if ($x3e->getId() || $x3d == 0) { $x3f = Mage::getSingleton("a\x64mi\x6eh\164\x6dl/\163\145\x73\x73\151\x6fn")->getFormData(true);  if (!empty($x3f)) { $x3e->setData($x3f);  } Mage::register("\x70\x6f\151\x6etof\163\x61\x6c\145_dat\x61", $x3e);  $this->loadLayout();  $this->_title($this->__('Manage'))->_title($this->__('POS / Warehouses'));  $this->getLayout()->getBlock("\150\145\141\144")->setCanLoadExtJs(true);  $this->_addContent($this->getLayout()->createBlock("\x70\157\x69nto\x66s\x61\x6ce\57\141\x64m\x69\x6e\150\164\x6dl\x5f\x6danag\145\137\x65\x64\151\164")) ->_addLeft($this->getLayout()->createBlock("\x70\157\x69n\164\x6f\x66\163al\x65\x2f\141\x64\x6d\x69n\150\x74ml_m\141n\x61\x67e\x5fe\x64\151\x74\137\164a\142\163"));  $this->renderLayout();  } else { Mage::getSingleton("a\x64mi\x6eh\164\x6dl/\163\145\x73\x73\151\x6fn")->addError(Mage::helper("p\157i\156\x74of\163\141le")->__("It\x65\x6d\x20\144\157\145\163\x20\x6eot\40\x65\x78\x69\x73\164"));  $this->_redirect("\52/\x2a/");  } } public function newAction() { $x55="s\x74rt\x6f\154\x6f\167\x65r";  $x56="\141r\162a\x79\x5f\160\157\x70";  $x57="e\170p\154\x6fd\x65";  $x58="\x69n\x5fa\x72\x72\x61y";  $x59="i\155\x70l\x6f\x64e";  $x5a="\163\x74\162\154\x65\156";  $x5b="c\157un\x74";  $this->_forward("\145\x64\151\164");  } public function saveAction() { $x55="\163\164\x72\164\157\154\x6f\167\x65\x72";  $x56="a\x72\x72\141y\x5f\160o\160";  $x57="\145\x78pl\157d\145";  $x58="\151\156\137\141rray";  $x59="\x69\155\x70\154\x6f\144e";  $x5a="str\x6c\145\x6e";  $x5b="c\x6f\165\x6e\164";  $x40 = array("\x61\143" => "\141\143\164\151v\141\164\x69\x6fn_\143\x6f\144\145", "\141\153" => "\141c\164iv\141t\151\x6fn\x5f\153\x65\171", "bu" => "b\141\163\145_u\162l", "\155\x64" => "md\65", "\164\x68" => "\164\x68i\x73", "\x64m" => "\137d\x65\155o", "\x65x\x74" => "pos", "v\145\162" => "\65\x2e\61\x2e\63");  $x41 = array( "\141c\164iv\141t\151\x6fn\x5f\153\x65\171" => Mage::getStoreConfig("\160o\151n\164\x6ff\x73\x61l\x65\x2f\154\151\143\145ns\x65\57\141\x63\x74\x69\166\x61\164io\156\137\153\x65y"), "\141\143\164\151v\141\164\x69\x6fn_\143\x6f\144\145" => Mage::getStoreConfig("\x70\x6f\x69\156\164\157f\163al\145\x2f\154i\143\145\x6e\x73\145\57\x61\143\164\x69vat\151o\156\x5f\x63\157\144\145"), "b\141\163\145_u\162l" => Mage::getStoreConfig("we\142\x2f\x73\145\143ur\x65\x2fba\x73e\137\x75\x72l"), );  if ($x41[$x40['ac']] != $x40["\155\x64"]($x40["\155\x64"]($x41[$x40['ak']]) . $x40["\155\x64"]($x41[$x40['bu']]) . $x40["\155\x64"]($x40["\x65x\x74"]) . $x40["\155\x64"]($x40["v\145\162"]))) { $$x40["\x65x\x74"] = "\166\141\154\151\144";  $$x40["\164\x68"]->$x40["\x64m"] = true;  } else { $$x40["\164\x68"]->$x40["\x64m"] = false;  $$x40["\x65x\x74"] = "\166\141\154\151\144";  } if (!isset($$x40["\x65x\x74"]) || $$x40["\164\x68"]->$x40["\x64m"]) $$x40["\164\x68"]->$x40["\x64m"] = true;  if ($$x40["\164\x68"]->$x40["\x64m"]) { $this->_getSession()->addError(Mage::helper("p\157i\156\x74of\163\141le")->__("In\x76\141\154i\x64 \x6ci\143\x65\x6ese."));  Mage::getConfig()->saveConfig("\x70\x6f\x69\156\164\157f\163al\145\x2f\154i\143\145\x6e\x73\145\57\x61\143\164\x69vat\151o\156\x5f\x63\157\144\145", "", "de\146\141\x75l\164", "\x30");  Mage::getConfig()->cleanCache();  $this->_redirect("\52/\x2a/");  } if ($$x40["\164\x68"]->$x40["\x64m"]) return $$x40["\164\x68"];  if ($this->getRequest()->getPost()) { $x3f = $this->getRequest()->getPost();  if (isset($_FILES["\x66i\154e"]["\x6e\141\155e"]) && $_FILES["\x66i\154e"]["\x6e\141\155e"] != "") { $x42 = 1;  if ($x55($x56($x57("\56", $_FILES["\x66i\154e"]["\x6e\141\155e"]))) != "\x63\163\166") Mage::getSingleton("a\x64mi\x6eh\164\x6dl/\163\145\x73\x73\151\x6fn")->addError(Mage::helper("p\157i\156\x74of\163\141le")->__("\127\162o\156\147\x20\146\151\x6c\x65\40\x74\171\160\145\x20\x28" . $_FILES["\x66i\154e"]["t\x79p\x65"] . "\x29\x2e\74\142\x72>C\150\157\x6f\x73e a\x20c\x73\x76\40\146\151le\56"));  else { $x43 = new Varien_File_Csv;  $x43->setDelimiter("\t");  $x44 = $x43->getData($_FILES["\x66i\154e"]["\164\x6d\160_\x6e\x61\155\x65"]);  $x3e = Mage::getModel("p\157\x69n\164\157fsal\x65\57p\157\x69n\164\157\146\x73al\145");  $x45 = $x44[0];  while (isset($x44[$x42])) { foreach ($x44[$x42] as $x46 => $x47) { $x3f[$x45[$x46]] = $x47;  } $x3e->setData($x3f)->save();  $x42++;  } } Mage::getSingleton("a\x64mi\x6eh\164\x6dl/\163\145\x73\x73\151\x6fn")->addSuccess(Mage::helper("p\157i\156\x74of\163\141le")->__(($x42 - 1) . " pl\141\143\145\x73\40h\x61\166e\40b\x65\145\x6e\40i\x6d\x70or\x74\145d."));  $this->_redirect("\52/\52/\151\x6dp\x6fr\x74\x43\x73\x76");  return;  } if (isset($x3f["\151mag\145"]["d\145l\145\x74\x65"]) && $x3f["\151mag\145"]["d\145l\145\x74\x65"] == 1) { $x3f["\151mag\145"] = "";  } else { if (isset($_FILES["\151mag\145"]["\x6e\141\155e"]) && $_FILES["\151mag\145"]["\x6e\141\155e"] != "") { try { $x48 = new Varien_File_Uploader("\151mag\145");
 $x48->setAllowedExtensions(array("jp\147", "j\x70\x65\147", "\x67\x69f", "\160\x6e\147"));  $x48->setAllowRenameFiles(true);  $x48->setFilesDispersion(false);  $x49 = Mage::getBaseDir("\155ed\x69\x61") . DS;  $x48->save($x49 . "st\x6fr\x65s", $_FILES["\151mag\145"]["\x6e\141\155e"]);  } catch (Exception $x4a) { } $x3f["\151mag\145"] = "\163\x74o\x72\x65\163/" . $_FILES["\151mag\145"]["\x6e\141\155e"];  } else unset($x3f["\151mag\145"]);  } $x3e = Mage::getModel("p\157\x69n\164\157fsal\x65\57p\157\x69n\164\157\146\x73al\145");  if ($x58('-1', $x3f["\x63\x75\x73\164\x6f\x6d\145\x72\x5fg\162\x6f\165\160"])) $x3f["\x63\x75\x73\164\x6f\x6d\145\x72\x5fg\162\x6f\165\160"] = array("\55\61");  $x3f["\x63\x75\x73\164\x6f\x6d\145\x72\x5fg\162\x6f\165\160"] = $x59(',', $x3f["\x63\x75\x73\164\x6f\x6d\145\x72\x5fg\162\x6f\165\160"]);  if ($x58('0', $x3f["\163\164o\x72\x65\137i\x64"])) $x3f["\163\164o\x72\x65\137i\x64"] = array("\x30");  $x3f["\163\164o\x72\x65\137i\x64"] = $x59(',', $x3f["\163\164o\x72\x65\137i\x64"]);  $x3e->setData($x3f) ->setId($this->getRequest()->getParam("\x70\x6c\141ce_\151\144"));  $x3e->save();  try { Mage::getSingleton("a\x64mi\x6eh\164\x6dl/\163\145\x73\x73\151\x6fn")->addSuccess(Mage::helper("p\157i\156\x74of\163\141le")->__("\111t\145\155\x20was\40su\x63\x63\x65\x73sf\165ll\171\x20\163\141\x76e\x64"));  Mage::getSingleton("a\x64mi\x6eh\164\x6dl/\163\145\x73\x73\151\x6fn")->setFormData(false);  if ($this->getRequest()->getParam("\142\141c\x6b")) { $this->_redirect("\x2a\57*\57\145\144it", array("\x70\x6c\141ce_\151\144" => $x3e->getId()));  return;  } $this->_redirect("\52/\x2a/");  return;  } catch (Exception $x4a) { Mage::getSingleton("a\x64mi\x6eh\164\x6dl/\163\145\x73\x73\151\x6fn")->addError($x4a->getMessage());  Mage::getSingleton("a\x64mi\x6eh\164\x6dl/\163\145\x73\x73\151\x6fn")->setFormData($x3f);  $this->_redirect("\x2a\57*\57\145\144it", array("\x70\x6c\141ce_\151\144" => $this->getRequest()->getParam("\x70\x6c\141ce_\151\144")));  return;  } } Mage::getSingleton("a\x64mi\x6eh\164\x6dl/\163\145\x73\x73\151\x6fn")->addError(Mage::helper("p\157i\156\x74of\163\141le")->__("\125n\141\x62\154\x65\x20\164\157\40find\40\x69tem \164o\40\163\x61\166\145"));  $this->_redirect("\52/\x2a/");  } public function deleteAction() { $x55="\x73\x74\x72\x74\157low\145\162";  $x56="a\162\x72\x61y\137\160\x6f\x70";  $x57="\145xp\x6c\x6f\144\x65";  $x58="in_a\162\x72ay";  $x59="\x69\155p\x6c\157\x64\145";  $x5a="\x73\164\162\x6c\145\x6e";  $x5b="c\157\x75\x6e\164";  if ($this->getRequest()->getParam("\x70\x6c\141ce_\151\144") > 0) { try { $x3e = Mage::getModel("p\157\x69n\164\157fsal\x65\57p\157\x69n\164\157\146\x73al\145");  $x3e->setId($this->getRequest()->getParam("\x70\x6c\141ce_\151\144")) ->delete();  Mage::getSingleton("a\x64mi\x6eh\164\x6dl/\163\145\x73\x73\151\x6fn")->addSuccess(Mage::helper("\x61\144\155\x69\x6eh\x74\155\x6c")->__("\x54\150e\x20\120\x4fS/w\x61re\150\157\165\x73\x65 \167\x61s\x20\163\x75c\143\145\163\163ful\x6c\171 d\145le\164\x65d"));  $this->_redirect("\52/\x2a/");  } catch (Exception $x4a) { Mage::getSingleton("a\x64mi\x6eh\164\x6dl/\163\145\x73\x73\151\x6fn")->addError($x4a->getMessage());  $this->_redirect("\x2a\57*\57\145\144it", array("\x70\x6c\141ce_\151\144" => $this->getRequest()->getParam("\x70\x6c\141ce_\151\144")));  } } $this->_redirect("\52/\x2a/");  } public function exportCsvAction() { $x55="\x73\164rto\154\157w\145\x72";  $x56="a\162r\x61y\137\x70\157p";  $x57="\145x\x70\x6c\x6fd\145";  $x58="i\x6e\137\x61rra\171";  $x59="\151\155\x70\x6c\157\144\x65";  $x5a="\x73tr\154e\156";  $x5b="\143\157\x75n\x74";  $x4b = "\x70\157\x69\156\164o\x66s\141\154e\x2e\143\x73\x76";  $x4c = null;  $x4d = Mage::getModel("p\157\x69n\164\157fsal\x65\57p\157\x69n\164\157\146\x73al\145")->getCollection();  $x4c.="\x63\x75\x73\164\x6f\x6d\145\x72\x5fg\162\x6f\165\160" . "\t";  $x4c.="\163\164o\x72\x65\137i\x64" . "\t";  $x4c.="o\x72d\145r" . "\t";  $x4c.="\163\x74\157\162e_\x63\x6f\x64e" . "\t";  $x4c.="\x6e\141\155e" . "\t";  $x4c.="\x61\x64\144\162\145\163\163\x5fl\151n\145\x5f\61" . "\t";  $x4c.="a\144d\162\x65s\x73\137line_\62" . "\t";  $x4c.="\143\151\164y" . "\t";  $x4c.="st\x61\164\x65" . "\t";  $x4c.="\160\x6f\163tal\137\143\x6f\x64e" . "\t";  $x4c.="co\x75n\x74ry\x5f\143\157de" . "\t";  $x4c.="\x6d\141i\x6e\x5fp\150\157\156\145" . "\t";  $x4c.="e\x6d\141\151l" . "\t";  $x4c.="\x68o\x75\x72\163" . "\t";  $x4c.="d\x65\163\x63r\x69\x70\x74i\x6f\x6e" . "\t";  $x4c.="\x6c\157n\x67itu\x64\145" . "\t";  $x4c.="\154\x61t\x69t\165\x64\145" . "\t";  $x4c.="\163\164\x61\164\165s" . "\t";  $x4c.="\151mag\145" . "\t";  foreach ($x4d as $x4e) { $x44.= $x4e->getData("\x63\x75\x73\164\x6f\x6d\145\x72\x5fg\162\x6f\165\160") . "\t";  $x44.= $x4e->getData("\163\164o\x72\x65\137i\x64") . "\t";  $x44.= $x4e->getData("o\x72d\145r") . "\t";  $x44.= $x4e->getData("\163\x74\157\162e_\x63\x6f\x64e") . "\t";  $x44.= $x4e->getData("\x6e\141\155e") . "\t";  $x44.= $x4e->getData("\x61\x64\144\162\145\163\163\x5fl\151n\145\x5f\61") . "\t";  $x44.= $x4e->getData("a\144d\162\x65s\x73\137line_\62") . "\t";  $x44.= $x4e->getData("\143\151\164y") . "\t";  $x44.= $x4e->getData("st\x61\164\x65") . "\t";  $x44.= $x4e->getData("\160\x6f\163tal\137\143\x6f\x64e") . "\t";  $x44.= $x4e->getData("co\x75n\x74ry\x5f\143\157de") . "\t";  $x44.= $x4e->getData("\x6d\141i\x6e\x5fp\150\157\156\145") . "\t";  $x44.= $x4e->getData("e\x6d\141\151l") . "\t";  $x44.= $x4e->getData("\x68o\x75\x72\163") . "\t";  $x44.= $x4e->getData("d\x65\163\x63r\x69\x70\x74i\x6f\x6e") . "\t";  $x44.= $x4e->getData("\x6c\157n\x67itu\x64\145") . "\t";  $x44.= $x4e->getData("\154\x61t\x69t\165\x64\145") . "\t";  $x44.= $x4e->getData("\163\164\x61\164\165s") . "\t";  $x44.= $x4e->getData("\151mag\145") . "\t";  $x44.= "\x0d\x0a";  } $this->_sendUploadResponse($x4b, $x4c . "\x0d\x0a" . $x44);  } protected function _sendUploadResponse($x4b, $x44, $x4f = "ap\x70l\x69\143a\164i\157\156/o\143t\x65\164-\x73\164r\x65am") { $x55="\163\x74\x72\x74\157\x6c\x6f\x77\x65\x72";  $x56="\x61\x72\162\141y\137p\x6f\x70";  $x57="e\x78p\154\157de";  $x58="\x69\x6e\x5f\x61\x72\162\x61\171";  $x59="\151m\160l\x6fde";  $x5a="\x73t\162l\145n";  $x5b="\143\157u\x6et";  $x50 = $this->getResponse();  $x50->setHeader("\x48T\x54\x50\57\61\x2e\61\40\62\60\x30 \117\x4b", "");  $x50->setHeader("\x50\162\141\x67m\x61", "p\165bli\x63", true);
 $x50->setHeader("\103\x61\143\x68\x65\55\x43\157\x6e\x74ro\154", "\x6d\165\163t-r\x65\166\141\x6c\x69\144\x61t\x65, \x70\157st\55\x63\x68ec\x6b\x3d\60\x2c p\162\x65-\143\x68ec\153\x3d\x30", true);  $x50->setHeader("\x43\x6f\x6e\x74en\164\x2dD\x69s\x70\x6fs\x69\164io\156", "\141t\x74a\143h\x6d\145\156\164\73 \146\151\x6ce\156a\x6de=" . $x4b);  $x50->setHeader("\114a\x73\164-\115\x6f\144\x69\146\x69\x65d", date("\x72"));  $x50->setHeader("\101\143\x63\x65\x70t-R\141\156g\x65s", "b\171tes");  $x50->setHeader("C\x6f\156\164\145n\x74-\114\x65n\x67\164\150", $x5a($x44));  $x50->setHeader("\103on\164e\156\164\x2dt\171\160e", $x4f);  $x50->setBody($x44);  $x50->sendResponse();  die;  } public function stateAction() { $x55="st\162to\154ow\145\x72";  $x56="\x61r\162\141y\x5f\x70op";  $x57="\x65\x78\160\154o\x64\145";  $x58="\x69\156\x5f\141\162\x72\141y";  $x59="i\x6d\160\154o\x64e";  $x5a="\x73\x74\162le\156";  $x5b="co\x75\x6et";  $x51 = $this->getRequest()->getParam('country');  $x52[] = "\x3co\160\x74i\157\x6e\40va\x6cue\75\x27'>\120\154\x65\141\x73e\x20\123\145\x6c\145c\164\x3c\x2f\157p\x74\151\x6f\156>";  if ($x51 != '') { $x53 = Mage::getModel('directory/region')->getResourceCollection()->addCountryFilter($x51)->load();  foreach ($x53 as $x54) { $x52[] = "<\157\x70\164\x69on \166\x61\154ue\75\47" . $x54->getCode() . "'\x3e" . $x54->getDefaultName() . "<\x2f\157pt\151o\x6e\76";  } } if ($x5b($x52) == 1) die("<\157\160\164\151\x6fn va\154\165e\x3d'\x27>\55-\55\55-\55\74\57\x6f\x70ti\157\x6e>");  else die($x59(' ', $x52));  } } ; 